<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 800 475" xmlns="http://www.w3.org/2000/svg">
  <!-- Background and Title -->
  <rect width="800" height="475" fill="#ffffff" rx="10" ry="10"/>
  
  <!-- Main sections -->
  <rect x="50" y="20" width="700" height="150" fill="#e6f3ff" stroke="#2980b9" stroke-width="2" rx="8" ry="8"/>
  <rect x="50" y="260" width="700" height="190" fill="#fff5e6" stroke="#e67e22" stroke-width="2" rx="8" ry="8"/>
  
  <!-- Section titles -->
  <text x="400" y="40" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#2980b9">Core of GNU Compiler Collection (GCC)</text>
  <text x="400" y="280" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#e67e22">GNU Binutils</text>
  
  <!-- Files and components -->
  <!-- Source file -->
  <rect x="70" y="80" width="80" height="40" fill="#fff" stroke="#333" stroke-width="1" rx="5" ry="5"/>
  <text x="110" y="103" font-family="Arial" font-size="12" text-anchor="middle">source.c</text>
  
  <!-- Preprocessor -->
  <rect x="190" y="70" width="100" height="60" fill="#d6eaf8" stroke="#2980b9" stroke-width="1.5" rx="5" ry="5"/>
  <text x="240" y="93" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Preprocessor</text>
  <text x="240" y="110" font-family="Arial" font-size="10" text-anchor="middle">(cpp)</text>
  
  <!-- Compiler Frontend -->
  <rect x="330" y="70" width="100" height="60" fill="#d6eaf8" stroke="#2980b9" stroke-width="1.5" rx="5" ry="5"/>
  <text x="380" y="93" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Frontend</text>
  <text x="380" y="110" font-family="Arial" font-size="10" text-anchor="middle">(cc1 - parsing)</text>
  
  <!-- GIMPLE/RTL label - added new intermediate representation -->
  <rect x="460" y="80" width="120" height="40" fill="#e8f8f5" stroke="#27ae60" stroke-width="1" rx="3" ry="3"/>
  <text x="520" y="98" font-family="Arial" font-size="11" text-anchor="middle">GIMPLE/RTL</text>
  <text x="520" y="110" font-family="Arial" font-size="9" text-anchor="middle" fill="#555">(Internal IR optimizations)</text>
  
  <!-- Compiler Backend -->
  <rect x="610" y="70" width="100" height="60" fill="#d6eaf8" stroke="#2980b9" stroke-width="1.5" rx="5" ry="5"/>
  <text x="660" y="93" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Backend</text>
  <text x="660" y="110" font-family="Arial" font-size="10" text-anchor="middle">(cc1 - codegen)</text>
  
  <!-- Compiler cc1 box -->
  <rect x="320" y="50" width="400" height="100" fill="none" stroke="#2980b9" stroke-width="1" stroke-dasharray="5,3" rx="5" ry="5"/>
  <text x="530" y="63" font-family="Arial" font-size="10" font-style="italic" text-anchor="middle" fill="#2980b9">cc1 compiler</text>
  
  <!-- Intermediate files -->
  <rect x="190" y="190" width="100" height="40" fill="#fff" stroke="#333" stroke-width="1" rx="3" ry="3"/>
  <text x="240" y="209" font-family="Arial" font-size="11" text-anchor="middle">source.i</text>
  <text x="240" y="224" font-family="Arial" font-size="9" text-anchor="middle" fill="#555">(Preprocessed code)</text>
  
  
  <rect x="610" y="190" width="100" height="40" fill="#fff" stroke="#333" stroke-width="1" rx="3" ry="3"/>
  <text x="660" y="209" font-family="Arial" font-size="11" text-anchor="middle">source.s</text>
  <text x="660" y="224" font-family="Arial" font-size="9" text-anchor="middle" fill="#555">(Assembly code)</text>
  
  <rect x="280" y="380" width="100" height="40" fill="#fff" stroke="#333" stroke-width="1" rx="3" ry="3"/>
  <text x="330" y="399" font-family="Arial" font-size="11" text-anchor="middle">source.o</text>
  <text x="330" y="414" font-family="Arial" font-size="9" text-anchor="middle" fill="#555">(Object file)</text>
  
  <!-- Repositioned binutils components -->
  <!-- Assembler (as) -->
  <rect x="110" y="300" width="100" height="60" fill="#fdebd0" stroke="#e67e22" stroke-width="1.5" rx="5" ry="5"/>
  <text x="160" y="323" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Assembler</text>
  <text x="160" y="340" font-family="Arial" font-size="10" text-anchor="middle">(as)</text>
  
  <!-- Libraries section -->
  <rect x="270" y="300" width="120" height="60" fill="#fdebd0" stroke="#e67e22" stroke-width="1.5" rx="5" ry="5"/>
  <text x="330" y="323" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Libraries</text>
  <text x="330" y="338" font-family="Arial" font-size="10" text-anchor="middle">(ar)</text>
  <text x="330" y="350" font-family="Arial" font-size="10" text-anchor="middle">(ranlib, math, stdlib)</text>
  
  <!-- Linker (ld) -->
  <rect x="450" y="300" width="100" height="60" fill="#fdebd0" stroke="#e67e22" stroke-width="1.5" rx="5" ry="5"/>
  <text x="500" y="323" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Linker</text>
  <text x="500" y="340" font-family="Arial" font-size="10" text-anchor="middle">(ld)</text>
  
  <!-- Final executable -->
  <rect x="610" y="300" width="80" height="60" fill="#e8f8f5" stroke="#27ae60" stroke-width="2" rx="5" ry="5"/>
  <text x="650" y="330" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">output</text>
  <text x="650" y="347" font-family="Arial" font-size="10" text-anchor="middle">(Executable)</text>
  
  <!-- Arrows -->
  <line x1="150" y1="100" x2="190" y2="100" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="290" y1="100" x2="330" y2="100" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="430" y1="100" x2="460" y2="100" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="580" y1="100" x2="610" y2="100" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="240" y1="130" x2="240" y2="190" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="660" y1="130" x2="660" y2="190" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Updated arrows for modified flow -->
  <line x1="660" y1="230" x2="660" y2="245" stroke="#333" stroke-width="1.5"/>
  <line x1="660" y1="245" x2="160" y2="245" stroke="#333" stroke-width="1.5"/>
  <line x1="160" y1="245" x2="160" y2="300" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="160" y1="360" x2="160" y2="400" stroke="#333" stroke-width="1.5"/>
  <line x1="160" y1="400" x2="280" y2="400" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="380" y1="400" x2="500" y2="400" stroke="#333" stroke-width="1.5"/>
  <line x1="500" y1="400" x2="500" y2="360" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="330" y1="360" x2="330" y2="380" stroke="#333" stroke-width="1.5" />
  <line x1="390" y1="330" x2="450" y2="330" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  <line x1="550" y1="330" x2="610" y2="330" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
  
  <!-- Command -->
  <rect x="30" y="440" width="300" height="30" fill="#f2f3f4" stroke="#7f8c8d" stroke-width="1" rx="3" ry="3"/>
  <text x="40" y="459" font-family="Courier New" font-size="12">$ gcc -o output source.c</text>
  
  <!-- Definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
  </defs>
</svg>